(this["webpackJsonp15-puzzle"]=this["webpackJsonp15-puzzle"]||[]).push([[0],{18:function(n,e,r){n.exports=r(29)},19:function(n,e,r){},29:function(n,e,r){"use strict";r.r(e);r(19);var t=r(0),o=r.n(t),a=r(12),i=r.n(a),c=r(17),u=r(5),l=function(n){return Math.floor(n/2)===n/2},f=function(n){return!l(n)};function s(n){var e=n.length,r=function(n){return n.reduce((function(n,e){return[].concat(Object(u.a)(n),Object(u.a)(e))}),[]).findIndex((function(n){return n.isMain}))}(n),t=function(n){return n.reduce((function(e,r){var t=r.map((function(e){return e.x+e.y*n.length+1}));return[].concat(Object(u.a)(e),Object(u.a)(t))}),[])}(n),o=e-Math.floor(r/e),a=function(n,e){return n.reduce((function(r,t,o){return t!==Math.pow(e,2)?r+n.slice(o+1).reduce((function(n,e){return t<e&&16!==t?n:n+1}),0):r}),0)}(t,e),i=f(e)&&l(a),c=l(e),s=f(o)&&l(a),d=l(o)&&f(a);return i||c&&(s||d)}function d(n){for(var e=n.length-1;e>0;e--)for(var r=n.length-1;r>0;r--){var t=Math.floor(Math.random()*e),o=Math.floor(Math.random()*r),a=n[e][r];n[e][r]=n[t][o],n[t][o]=a}return n}var h=r(3),v=function(n,e){return n.map((function(n,r){return n.map((function(n,t){return e(n,r,t)}))}))};function b(n){return v(n,(function(n,e,r){return Object(h.a)(Object(h.a)({},n),{},{isRight:n.x===r&&n.y===e})}))}function p(n){for(var e=d(n),r=s(e);!r;)r=s(e=d(e));return b(e)}function g(){var n=Array.from(Array(4),(function(n,e){return Array.from(Array(4),(function(n,r){return{number:r+4*e+1,y:e,x:r,isRight:!0,isMain:!1}}))}));return n[3][3].isMain=!0,n}var w="BREAK_GAME",m="SET_STATE",y="INIT_GAME",x={enabled:!1,board:g()},E=o.a.createContext({state:x,dispatch:function(){return null}});function k(n,e){var r=e.payload||{},t=r.enabled,o=r.board;switch(e.type){case y:return{enabled:!0,board:p(g())};case w:return{enabled:!1,board:g()};case m:return{enabled:t,board:o};default:throw new Error}}var j=function(n){var e=n.children,r=Object(t.useReducer)(k,x),a=Object(c.a)(r,2),i=a[0],u=a[1],l=Object(t.useMemo)((function(){return{state:i,dispatch:u}}),[i,u]);return o.a.createElement(E.Provider,{value:l},e)},O=r(13);var M=function(n){var e=n.children,r=n.onChangeGameState;return o.a.createElement(O.a,{nodeName:"div",detectTouch:!0,onSwipedLeft:function(){return r({keyCode:37})},onSwipedRight:function(){return r({keyCode:39})},onSwipedDown:function(){return r({keyCode:40})},onSwipedUp:function(){return r({keyCode:38})}},e)},A=r(2),C=r(1),z="darkorange",S="white",R="#804600",W="#552f00";function G(){var n=Object(A.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-sizing: border-box;\n    width: 25%;\n    height: 25%;\n    border: 2.5px solid white;\n    font-size: 1rem;\n    background-color: ",";\n"]);return G=function(){return n},n}var T=S,I="green",N="#fe9802";var P=C.a.div(G(),(function(n){return function(n){switch(n){case"default":return N;case"main":return T;case"right":return I}throw new Error("setBgColor Error")}(n.status)}));var U=function(n){var e=n.children,r=n.status;return o.a.createElement(P,{status:r},e)};function B(){var n=Object(A.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-wrap: wrap;\n    user-select: none;\n    width: 40vh;\n    height: 40vh;\n    background-color: ",";\n    border: 1px solid ",";\n    box-shadow: 2px 2px 10px ",";\n"]);return B=function(){return n},n}function K(){var n=Object(A.a)(["\n    box-sizing: border-box;\n    border: none;\n    padding: 10px;\n    margin: 15px;\n    background-color: ",";\n    color: ",";\n    cursor: pointer;\n\n    &:hover {\n        background-color: ",";\n    }\n"]);return K=function(){return n},n}function L(){var n=Object(A.a)(["\n    display: flex;\n"]);return L=function(){return n},n}var _=S,D=z,J=R,F=W,Y=C.a.nav(L()),$=C.a.button(K(),J,_,F),q=C.a.div(B(),_,D,D);var H=function(){var n=Object(t.useRef)(null),e=Object(t.useContext)(E),r=e.state,a=e.dispatch,i=function(n,e){for(var t,o=0;o<r.board.length;o++)for(var a=0;a<r.board[o].length;a++)if(r.board[o][a].isMain){t={y:o,x:a};break}if(!t)throw new Error("findMain error");var i={x:t.x+n,y:t.y+e};return i.y<4&&i.y>-1&&i.x<4&&i.x>-1?function(n,e,r){var t=v(n,(function(n){return Object(h.a)({},n)})),o=[Object(h.a)({},t[r.y][r.x]),t[e.y][e.x]];return t[e.y][e.x]=o[0],t[r.y][r.x]=o[1],t}(r.board,t,i):r.board},c=function(n){return function(n,e){var r=e.right,t=e.left,o=e.top,a=e.bottom;switch(n){case 37:return t();case 38:return o();case 39:return r();case 40:return a()}throw new Error("mapArrowKey errer")}(n,{top:function(){return i(0,-1)},bottom:function(){return i(0,1)},right:function(){return i(1,0)},left:function(){return i(-1,0)}})},u=function(n){if(r.enabled&&n.keyCode<=40&&n.keyCode>=37){var e=b(c(n.keyCode)),t=e.flat(1).every((function(n){return n.isRight}));a({type:m,payload:{enabled:!t,board:e}}),t&&alert("YOU ARE WIN A GAME!!!")}};return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"15-puzzle"),o.a.createElement(Y,null,o.a.createElement($,{onClick:function(){(null===n||void 0===n?void 0:n.current)&&n.current.focus(),a({type:y})}},"#shuffleGame"),o.a.createElement($,{onClick:function(){return a({type:w})}},"#breakGame")),o.a.createElement("div",null,o.a.createElement(M,{onChangeGameState:u},o.a.createElement(q,{ref:n,onKeyDown:u,tabIndex:"0"},r.board.map((function(n){return n.map((function(n){var e=n.x+4*n.y+1,r="default";return n.isMain?r="main":n.isRight&&(r="right"),o.a.createElement(U,{key:e,status:r},e)}))}))))))},Q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(n,e){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var r=n.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}})).catch((function(n){console.error("Error during service worker registration:",n)}))}i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null,o.a.createElement(H,null))),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("/15-Puzzle",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/15-Puzzle","/service-worker.js");Q?(!function(n,e){fetch(n,{headers:{"Service-Worker":"script"}}).then((function(r){var t=r.headers.get("content-type");404===r.status||null!=t&&-1===t.indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):V(n,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):V(e,n)}))}}()}},[[18,1,2]]]);
//# sourceMappingURL=main.d5afabaa.chunk.js.map